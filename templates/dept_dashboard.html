{% extends "base_dashboard.html" %}
{% block title %}Department Dashboard{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dept_dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-container">

  <!-- Top Stats -->
  <div class="stat-card">
    <h2 id="deptCourses">12</h2>
    <p>Total Courses</p>
  </div>
  <div class="stat-card">
    <h2 id="deptStudents">420</h2>
    <p>Total Students</p>
  </div>
  <div class="stat-card">
    <h2 id="deptSessions">35</h2>
    <p>Sessions Conducted</p>
  </div>
  <div class="stat-card">
    <h2 id="avgAttendance">82%</h2>
    <p>Average Attendance</p>
  </div>
</div>

<!-- Charts Row -->
<div class="charts-row">
  <div class="section-container chart-box">
    <div class="section-header">
      <i class="fas fa-chart-bar"></i> Course Attendance %
    </div>
    <canvas id="courseAttendanceChart"></canvas>
  </div>
  <div class="section-container chart-box">
    <div class="section-header">
      <i class="fas fa-chart-line"></i> Attendance Trend
    </div>
    <canvas id="attendanceTrendChart"></canvas>
  </div>
</div>

<!-- Highlights Row -->
<div class="highlights-row">
  <div class="section-container highlight-card">
    <div class="section-header">
      <i class="fas fa-trophy text-green-500"></i> Top Course
    </div>
    <p><strong>MATHS101</strong> – 95% Attendance</p>
  </div>
  <div class="section-container highlight-card">
    <div class="section-header">
      <i class="fas fa-exclamation-triangle text-red-500"></i> Lowest Course
    </div>
    <p><strong>PHY102</strong> – 60% Attendance</p>
  </div>
</div>


<!-- Calendar & Recent Sessions -->
<div class="bottom-row">
  <div class="section-container calendar">
    <div class="section-header">
      <i class="fas fa-calendar-alt"></i> Department Sessions Calendar
    </div>
    <div class="calendar-header">
      <button id="prev-month">&lt;</button>
      <span id="month-label"></span>
      <button id="next-month">&gt;</button>
    </div>
    <div class="calendar-days"></div>
  </div>

  <div class="section-container recent-sessions">
    <div class="section-header">
      <i class="fas fa-clock"></i> Recent Sessions
    </div>
    <ul id="recentSessions">
      <li>MATHS101 | 12/09/2025 | Present: 45 | Absent: 10</li>
      <li>PHY102 | 10/09/2025 | Present: 38 | Absent: 15</li>
      <li>CSE103 | 08/09/2025 | Present: 50 | Absent: 5</li>
    </ul>
  </div>
</div>

<!-- Reports -->
<div class="section-container reports">
  <div class="section-header">
    <i class="fas fa-file-download"></i> Reports
  </div>
  <button class="btn-primary">Download PDF</button>
  <button class="btn-success">Export CSV</button>
</div>

{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/dept_dashboard.js') }}"></script>
{% endblock %}
